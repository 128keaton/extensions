{"version":3,"file":"mtxPopover.js","sources":["../../../projects/extensions/popover/popover-errors.ts","../../../projects/extensions/popover/popover-animations.ts","../../../projects/extensions/popover/popover.ts","../../../projects/extensions/popover/popover-trigger.ts","../../../projects/extensions/popover/popover-target.ts","../../../projects/extensions/popover/popover-module.ts","../../../projects/extensions/popover/mtxPopover.ts"],"sourcesContent":["/**\r\n * Throws an exception for the case when popover trigger doesn't have a valid mtx-popover instance\r\n */\r\nexport function throwMtxPopoverMissingError() {\r\n  throw Error(`mtx-popover-trigger: must pass in an mtx-popover instance.\r\n\r\n    Example:\r\n      <mtx-popover #popover=\"mtxPopover\"></mtx-popover>\r\n      <button [mtxPopoverTriggerFor]=\"popover\"></button>`);\r\n}\r\n\r\n/**\r\n * Throws an exception for the case when popover's mtxPopoverPositionX value isn't valid.\r\n * In other words, it doesn't match 'before' or 'after'.\r\n */\r\nexport function throwMtxPopoverInvalidPositionX() {\r\n  throw Error(`mtxPopoverPositionX value must be either 'before', 'center' or after'.\r\n      Example: <mtx-popover mtxPopoverPositionX=\"before\" #popover=\"mtxPopover\"></mtx-popover>`);\r\n}\r\n\r\n/**\r\n * Throws an exception for the case when popover's mtxPopoverPositionY value isn't valid.\r\n * In other words, it doesn't match 'above' or 'below'.\r\n */\r\nexport function throwMtxPopoverInvalidPositionY() {\r\n  throw Error(`mtxPopoverPositionY value must be either 'above' or below'.\r\n      Example: <mtx-popover mtxPopoverPositionY=\"above\" #popover=\"mtxPopover\"></mtx-popover>`);\r\n}\r\n","import {\r\n  trigger,\r\n  state,\r\n  style,\r\n  animate,\r\n  transition,\r\n  AnimationTriggerMetadata,\r\n} from '@angular/animations';\r\n\r\n/**\r\n * Below are all the animations for the md-popover component.\r\n * Animation duration and timing values are based on AngularJS Material.\r\n */\r\n\r\n/**\r\n * This animation controls the popover panel's entry and exit from the page.\r\n *\r\n * When the popover panel is added to the DOM, it scales in and fades in its border.\r\n *\r\n * When the popover panel is removed from the DOM, it simply fades out after a brief\r\n * delay to display the ripple.\r\n */\r\n\r\nexport const transformPopover: AnimationTriggerMetadata = trigger('transformPopover', [\r\n  state(\r\n    'enter',\r\n    style({\r\n      opacity: 1,\r\n      transform: `scale(1)`,\r\n    })\r\n  ),\r\n  transition('void => *', [\r\n    style({\r\n      opacity: 0,\r\n      transform: `scale(0)`,\r\n    }),\r\n    animate(`200ms cubic-bezier(0.25, 0.8, 0.25, 1)`),\r\n  ]),\r\n  transition('* => void', [animate('50ms 100ms linear', style({ opacity: 0 }))]),\r\n]);\r\n","import {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnDestroy,\r\n  Output,\r\n  TemplateRef,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n  ElementRef,\r\n  ChangeDetectionStrategy,\r\n  HostBinding,\r\n  NgZone,\r\n  Optional,\r\n} from '@angular/core';\r\nimport { AnimationEvent } from '@angular/animations';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\nimport { ESCAPE } from '@angular/cdk/keycodes';\r\nimport { Directionality } from '@angular/cdk/bidi';\r\n\r\nimport {\r\n  MtxPopoverPositionX,\r\n  MtxPopoverPositionY,\r\n  MtxPopoverTriggerEvent,\r\n  MtxPopoverScrollStrategy,\r\n} from './popover-types';\r\nimport { throwMtxPopoverInvalidPositionX, throwMtxPopoverInvalidPositionY } from './popover-errors';\r\nimport { MtxPopoverPanel } from './popover-interfaces';\r\nimport { transformPopover } from './popover-animations';\r\n\r\n@Component({\r\n  selector: 'mtx-popover',\r\n  templateUrl: './popover.html',\r\n  styleUrls: ['./popover.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  encapsulation: ViewEncapsulation.None,\r\n  animations: [transformPopover],\r\n  exportAs: 'mtxPopover',\r\n})\r\nexport class MtxPopover implements MtxPopoverPanel, OnDestroy {\r\n  @HostBinding('attr.role') role = 'dialog';\r\n\r\n  /** Settings for popover, view setters and getters for more detail */\r\n  private _xPosition: MtxPopoverPositionX = 'after';\r\n  private _yPosition: MtxPopoverPositionY = 'below';\r\n  private _triggerEvent: MtxPopoverTriggerEvent = 'hover';\r\n  private _scrollStrategy: MtxPopoverScrollStrategy = 'reposition';\r\n  private _enterDelay = 100;\r\n  private _leaveDelay = 100;\r\n  private _overlapTrigger = false;\r\n  private _disableAnimation = false;\r\n  private _panelOffsetX = 0;\r\n  private _panelOffsetY = 0;\r\n  private _closeOnPanelClick = false;\r\n  private _closeOnBackdropClick = true;\r\n  private _focusTrapEnabled = true;\r\n  private _focusTrapAutoCaptureEnabled = true;\r\n  private _arrowOffsetX = 20;\r\n  private _arrowWidth = 16;\r\n\r\n  /** Config object to be passed into the popover's ngClass */\r\n  _classList: { [key: string]: boolean } = {};\r\n\r\n  // TODO: Write comment description\r\n  /** */\r\n  public containerPositioning = false;\r\n\r\n  /** Closing disabled on popover */\r\n  public closeDisabled = false;\r\n\r\n  /** Config object to be passed into the popover's arrow ngStyle */\r\n  public popoverPanelStyles!: {};\r\n\r\n  /** Config object to be passed into the popover's arrow ngStyle */\r\n  public popoverArrowStyles!: {};\r\n\r\n  /** Config object to be passed into the popover's content ngStyle */\r\n  public popoverContentStyles!: {};\r\n\r\n  /** Emits the current animation state whenever it changes. */\r\n  _onAnimationStateChange = new EventEmitter<AnimationEvent>();\r\n\r\n  /** Position of the popover in the X axis. */\r\n  @Input()\r\n  get xPosition() {\r\n    return this._xPosition;\r\n  }\r\n  set xPosition(value: MtxPopoverPositionX) {\r\n    if (value !== 'before' && value !== 'after' && value !== 'center') {\r\n      throwMtxPopoverInvalidPositionX();\r\n    }\r\n    this._xPosition = value;\r\n    this.setPositionClasses();\r\n  }\r\n\r\n  /** Position of the popover in the Y axis. */\r\n  @Input()\r\n  get yPosition() {\r\n    return this._yPosition;\r\n  }\r\n  set yPosition(value: MtxPopoverPositionY) {\r\n    if (value !== 'above' && value !== 'below') {\r\n      throwMtxPopoverInvalidPositionY();\r\n    }\r\n    this._yPosition = value;\r\n    this.setPositionClasses();\r\n  }\r\n\r\n  /** Popover trigger event */\r\n  @Input()\r\n  get triggerEvent(): MtxPopoverTriggerEvent {\r\n    return this._triggerEvent;\r\n  }\r\n  set triggerEvent(value: MtxPopoverTriggerEvent) {\r\n    this._triggerEvent = value;\r\n  }\r\n\r\n  /** Popover scroll strategy */\r\n  @Input()\r\n  get scrollStrategy(): MtxPopoverScrollStrategy {\r\n    return this._scrollStrategy;\r\n  }\r\n  set scrollStrategy(value: MtxPopoverScrollStrategy) {\r\n    this._scrollStrategy = value;\r\n  }\r\n\r\n  /** Popover enter delay */\r\n  @Input()\r\n  get enterDelay(): number {\r\n    return this._enterDelay;\r\n  }\r\n  set enterDelay(value: number) {\r\n    this._enterDelay = value;\r\n  }\r\n\r\n  /** Popover leave delay */\r\n  @Input()\r\n  get leaveDelay(): number {\r\n    return this._leaveDelay;\r\n  }\r\n  set leaveDelay(value: number) {\r\n    this._leaveDelay = value;\r\n  }\r\n\r\n  /** Popover overlap trigger */\r\n  @Input()\r\n  get overlapTrigger(): boolean {\r\n    return this._overlapTrigger;\r\n  }\r\n  set overlapTrigger(value: boolean) {\r\n    this._overlapTrigger = value;\r\n  }\r\n\r\n  /** Popover target offset x */\r\n  @Input()\r\n  get xOffset(): number {\r\n    return this._panelOffsetX;\r\n  }\r\n  set xOffset(value: number) {\r\n    this._panelOffsetX = value;\r\n  }\r\n\r\n  /** Popover target offset y */\r\n  @Input()\r\n  get yOffset(): number {\r\n    return this._panelOffsetY;\r\n  }\r\n  set yOffset(value: number) {\r\n    this._panelOffsetY = value;\r\n  }\r\n\r\n  /** Popover arrow offset x */\r\n  @Input()\r\n  get arrowOffsetX(): number {\r\n    return this._arrowOffsetX;\r\n  }\r\n  set arrowOffsetX(value: number) {\r\n    this._arrowOffsetX = value;\r\n  }\r\n\r\n  /** Popover arrow width */\r\n  @Input()\r\n  get arrowWidth(): number {\r\n    return this._arrowWidth;\r\n  }\r\n  set arrowWidth(value: number) {\r\n    this._arrowWidth = value;\r\n  }\r\n\r\n  /** Popover close on container click */\r\n  @Input()\r\n  get closeOnPanelClick(): boolean {\r\n    return this._closeOnPanelClick;\r\n  }\r\n  set closeOnPanelClick(value: boolean) {\r\n    this._closeOnPanelClick = coerceBooleanProperty(value);\r\n  }\r\n\r\n  /** Popover close on backdrop click */\r\n  @Input()\r\n  get closeOnBackdropClick(): boolean {\r\n    return this._closeOnBackdropClick;\r\n  }\r\n  set closeOnBackdropClick(value: boolean) {\r\n    this._closeOnBackdropClick = coerceBooleanProperty(value);\r\n  }\r\n\r\n  /** Disable animations of popover and all child elements */\r\n  @Input()\r\n  get disableAnimation(): boolean {\r\n    return this._disableAnimation;\r\n  }\r\n  set disableAnimation(value: boolean) {\r\n    this._disableAnimation = coerceBooleanProperty(value);\r\n  }\r\n\r\n  /** Popover focus trap using cdkTrapFocus */\r\n  @Input()\r\n  get focusTrapEnabled(): boolean {\r\n    return this._focusTrapEnabled;\r\n  }\r\n  set focusTrapEnabled(value: boolean) {\r\n    this._focusTrapEnabled = coerceBooleanProperty(value);\r\n  }\r\n\r\n  /** Popover focus trap auto capture using cdkTrapFocusAutoCapture */\r\n  @Input()\r\n  get focusTrapAutoCaptureEnabled(): boolean {\r\n    return this._focusTrapAutoCaptureEnabled;\r\n  }\r\n  set focusTrapAutoCaptureEnabled(value: boolean) {\r\n    this._focusTrapAutoCaptureEnabled = coerceBooleanProperty(value);\r\n  }\r\n\r\n  /**\r\n   * This method takes classes set on the host md-popover element and applies them on the\r\n   * popover template that displays in the overlay container.  Otherwise, it's difficult\r\n   * to style the containing popover from outside the component.\r\n   * @param classes list of class names\r\n   */\r\n  @Input('class')\r\n  set panelClass(classes: string) {\r\n    if (classes && classes.length) {\r\n      this._classList = classes.split(' ').reduce((obj: any, className: string) => {\r\n        obj[className] = true;\r\n        return obj;\r\n      }, {});\r\n\r\n      this._elementRef.nativeElement.className = '';\r\n      this.setPositionClasses();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method takes classes set on the host md-popover element and applies them on the\r\n   * popover template that displays in the overlay container.  Otherwise, it's difficult\r\n   * to style the containing popover from outside the component.\r\n   * @deprecated Use `panelClass` instead.\r\n   * @breaking-change 8.0.0\r\n   */\r\n  @Input()\r\n  get classList(): string {\r\n    return this.panelClass;\r\n  }\r\n  set classList(classes: string) {\r\n    this.panelClass = classes;\r\n  }\r\n\r\n  /** Event emitted when the popover is closed. */\r\n  @Output() closed = new EventEmitter<void>();\r\n\r\n  @ViewChild(TemplateRef) templateRef!: TemplateRef<any>;\r\n\r\n  constructor(\r\n    @Optional() private _dir: Directionality,\r\n    private _elementRef: ElementRef,\r\n    public zone: NgZone\r\n  ) {\r\n    this.setPositionClasses();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._emitCloseEvent();\r\n    this.closed.complete();\r\n  }\r\n\r\n  /** Handle a keyboard event from the popover, delegating to the appropriate action. */\r\n  _handleKeydown(event: KeyboardEvent) {\r\n    switch (event.keyCode) {\r\n      case ESCAPE:\r\n        this._emitCloseEvent();\r\n        return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This emits a close event to which the trigger is subscribed. When emitted, the\r\n   * trigger will close the popover.\r\n   */\r\n  _emitCloseEvent(): void {\r\n    this.closed.emit();\r\n  }\r\n\r\n  /** Close popover on click if closeOnPanelClick is true */\r\n  onClick() {\r\n    if (this.closeOnPanelClick) {\r\n      this._emitCloseEvent();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * TODO: Refactor when @angular/cdk includes feature I mentioned on github see link below.\r\n   * https://github.com/angular/material2/pull/5493#issuecomment-313085323\r\n   */\r\n  /** Disables close of popover when leaving trigger element and mouse over the popover */\r\n  onMouseOver() {\r\n    if (this.triggerEvent === 'hover') {\r\n      this.closeDisabled = true;\r\n    }\r\n  }\r\n  /** Enables close of popover when mouse leaving popover element */\r\n  onMouseLeave() {\r\n    if (this.triggerEvent === 'hover') {\r\n      this.closeDisabled = false;\r\n      this._emitCloseEvent();\r\n    }\r\n  }\r\n\r\n  // TODO: Refactor how styles are set and updated on the component, use best practices.\r\n  // TODO: If arrow left and right positioning is requested, see if flex direction can be used to work with order.\r\n  /** Sets the current styles for the popover to allow for dynamically changing settings */\r\n  setCurrentStyles() {\r\n    const left =\r\n      this.xPosition === 'after'\r\n        ? `${this.arrowOffsetX - this.arrowWidth / 2}px`\r\n        : this.xPosition === 'center'\r\n        ? `calc(50% - ${this.arrowWidth / 2}px)`\r\n        : '';\r\n    const right = this.xPosition === 'before' ? `${this.arrowOffsetX - this.arrowWidth / 2}px` : '';\r\n\r\n    this.popoverArrowStyles = {\r\n      left: this._dir.value === 'ltr' ? left : right,\r\n      right: this._dir.value === 'ltr' ? right : left,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * It's necessary to set position-based classes to ensure the popover panel animation\r\n   * folds out from the correct direction.\r\n   */\r\n  setPositionClasses(posX = this.xPosition, posY = this.yPosition): void {\r\n    this._classList['mtx-popover-before'] = posX === 'before';\r\n    this._classList['mtx-popover-center'] = posX === 'center';\r\n    this._classList['mtx-popover-after'] = posX === 'after';\r\n    this._classList['mtx-popover-above'] = posY === 'above';\r\n    this._classList['mtx-popover-below'] = posY === 'below';\r\n  }\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnDestroy,\r\n  Optional,\r\n  Output,\r\n  ViewContainerRef,\r\n  HostListener,\r\n  HostBinding,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\n\r\nimport { isFakeMousedownFromScreenReader } from '@angular/cdk/a11y';\r\nimport { Direction, Directionality } from '@angular/cdk/bidi';\r\nimport {\r\n  Overlay,\r\n  OverlayRef,\r\n  OverlayConfig,\r\n  HorizontalConnectionPos,\r\n  VerticalConnectionPos,\r\n  FlexibleConnectedPositionStrategy,\r\n  ScrollStrategy,\r\n} from '@angular/cdk/overlay';\r\nimport { TemplatePortal } from '@angular/cdk/portal';\r\n\r\nimport { Subscription, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nimport { MtxPopoverPanel, MtxTarget } from './popover-interfaces';\r\nimport {\r\n  MtxPopoverPositionX,\r\n  MtxPopoverPositionY,\r\n  MtxPopoverTriggerEvent,\r\n  MtxPopoverScrollStrategy,\r\n} from './popover-types';\r\nimport { throwMtxPopoverMissingError } from './popover-errors';\r\n\r\n/**\r\n * This directive is intended to be used in conjunction with an mtx-popover tag. It is\r\n * responsible for toggling the display of the provided popover instance.\r\n */\r\n\r\n@Directive({\r\n  selector: '[mtxPopoverTriggerFor]',\r\n  exportAs: 'mtxPopoverTrigger',\r\n})\r\nexport class MtxPopoverTrigger implements AfterViewInit, OnDestroy {\r\n  @HostBinding('attr.aria-haspopup') ariaHaspopup = true;\r\n\r\n  popoverOpened$ = new Subject<void>();\r\n  popoverClosed$ = new Subject<void>();\r\n\r\n  private _portal!: TemplatePortal<any>;\r\n  private _overlayRef: OverlayRef | null = null;\r\n  private _popoverOpen = false;\r\n  private _halt = false;\r\n  private _backdropSubscription!: Subscription;\r\n  private _positionSubscription!: Subscription;\r\n  private _detachmentsSubscription!: Subscription;\r\n\r\n  private _mouseoverTimer: any;\r\n\r\n  // tracking input type is necessary so it's possible to only auto-focus\r\n  // the first item of the list when the popover is opened via the keyboard\r\n  private _openedByMouse = false;\r\n\r\n  private _onDestroy = new Subject<void>();\r\n\r\n  /** References the popover instance that the trigger is associated with. */\r\n  @Input('mtxPopoverTriggerFor') popover!: MtxPopoverPanel;\r\n\r\n  /** References the popover target instance that the trigger is associated with. */\r\n  @Input('mtxPopoverTargetAt') targetElement!: MtxTarget;\r\n\r\n  /** Popover trigger event */\r\n  @Input('mtxPopoverTriggerOn') triggerEvent!: MtxPopoverTriggerEvent;\r\n\r\n  /** Event emitted when the associated popover is opened. */\r\n  @Output() popoverOpened = new EventEmitter<void>();\r\n\r\n  /** Event emitted when the associated popover is closed. */\r\n  @Output() popoverClosed = new EventEmitter<void>();\r\n\r\n  constructor(\r\n    private _overlay: Overlay,\r\n    public _elementRef: ElementRef,\r\n    private _viewContainerRef: ViewContainerRef,\r\n    @Optional() private _dir: Directionality,\r\n    private _changeDetectorRef: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngAfterViewInit() {\r\n    this._checkPopover();\r\n    this._setCurrentConfig();\r\n    this.popover.closed.subscribe(() => this.closePopover());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroyPopover();\r\n  }\r\n\r\n  private _setCurrentConfig() {\r\n    if (this.triggerEvent) {\r\n      this.popover.triggerEvent = this.triggerEvent;\r\n    }\r\n\r\n    this.popover.setCurrentStyles();\r\n  }\r\n\r\n  /** Whether the popover is open. */\r\n  get popoverOpen(): boolean {\r\n    return this._popoverOpen;\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    if (this.popover.triggerEvent === 'click') {\r\n      this.togglePopover();\r\n    }\r\n  }\r\n\r\n  @HostListener('mouseenter', ['$event'])\r\n  onMouseEnter(event: MouseEvent): void {\r\n    this._halt = false;\r\n    if (this.popover.triggerEvent === 'hover') {\r\n      this._mouseoverTimer = setTimeout(() => {\r\n        this.openPopover();\r\n      }, this.popover.enterDelay);\r\n    }\r\n  }\r\n\r\n  @HostListener('mouseleave', ['$event'])\r\n  onMouseLeave(event: MouseEvent): void {\r\n    if (this.popover.triggerEvent === 'hover') {\r\n      if (this._mouseoverTimer) {\r\n        clearTimeout(this._mouseoverTimer);\r\n        this._mouseoverTimer = null;\r\n      }\r\n      if (this._popoverOpen) {\r\n        setTimeout(() => {\r\n          if (!this.popover.closeDisabled) {\r\n            this.closePopover();\r\n          }\r\n        }, this.popover.leaveDelay);\r\n      } else {\r\n        this._halt = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Toggles the popover between the open and closed states. */\r\n  togglePopover(): void {\r\n    return this._popoverOpen ? this.closePopover() : this.openPopover();\r\n  }\r\n\r\n  /** Opens the popover. */\r\n  openPopover(): void {\r\n    if (!this._popoverOpen && !this._halt) {\r\n      this._createOverlay().attach(this._portal);\r\n\r\n      this._subscribeToBackdrop();\r\n      this._subscribeToDetachments();\r\n\r\n      this._initPopover();\r\n    }\r\n  }\r\n\r\n  /** Closes the popover. */\r\n  closePopover(): void {\r\n    if (this._overlayRef) {\r\n      this._overlayRef.detach();\r\n      this._resetPopover();\r\n    }\r\n\r\n    this.destroyPopover();\r\n  }\r\n\r\n  /** Removes the popover from the DOM. */\r\n  destroyPopover(): void {\r\n    if (this._mouseoverTimer) {\r\n      clearTimeout(this._mouseoverTimer);\r\n      this._mouseoverTimer = null;\r\n    }\r\n    if (this._overlayRef) {\r\n      this._overlayRef.dispose();\r\n      this._overlayRef = null;\r\n      this._cleanUpSubscriptions();\r\n    }\r\n\r\n    this._onDestroy.next();\r\n    this._onDestroy.complete();\r\n  }\r\n\r\n  /** Focuses the popover trigger. */\r\n  focus() {\r\n    this._elementRef.nativeElement.focus();\r\n  }\r\n\r\n  /** The text direction of the containing app. */\r\n  get dir(): Direction {\r\n    return this._dir && this._dir.value === 'rtl' ? 'rtl' : 'ltr';\r\n  }\r\n\r\n  /**\r\n   * This method ensures that the popover closes when the overlay backdrop is clicked.\r\n   * We do not use first() here because doing so would not catch clicks from within\r\n   * the popover, and it would fail to unsubscribe properly. Instead, we unsubscribe\r\n   * explicitly when the popover is closed or destroyed.\r\n   */\r\n  private _subscribeToBackdrop(): void {\r\n    if (this._overlayRef) {\r\n      /** Only subscribe to backdrop if trigger event is click */\r\n      if (this.triggerEvent === 'click' && this.popover.closeOnBackdropClick === true) {\r\n        this._overlayRef\r\n          .backdropClick()\r\n          .pipe(takeUntil(this.popoverClosed$), takeUntil(this._onDestroy))\r\n          .subscribe(() => {\r\n            this.popover._emitCloseEvent();\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  private _subscribeToDetachments(): void {\r\n    if (this._overlayRef) {\r\n      this._overlayRef\r\n        .detachments()\r\n        .pipe(takeUntil(this.popoverClosed$), takeUntil(this._onDestroy))\r\n        .subscribe(() => {\r\n          this._setPopoverClosed();\r\n        });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method sets the popover state to open and focuses the first item if\r\n   * the popover was opened via the keyboard.\r\n   */\r\n  private _initPopover(): void {\r\n    this._setPopoverOpened();\r\n  }\r\n\r\n  /**\r\n   * This method resets the popover when it's closed, most importantly restoring\r\n   * focus to the popover trigger if the popover was opened via the keyboard.\r\n   */\r\n  private _resetPopover(): void {\r\n    this._setPopoverClosed();\r\n\r\n    // Focus only needs to be reset to the host element if the popover was opened\r\n    // by the keyboard and manually shifted to the first popover item.\r\n    if (!this._openedByMouse) {\r\n      this.focus();\r\n    }\r\n    this._openedByMouse = false;\r\n  }\r\n\r\n  /** set state rather than toggle to support triggers sharing a popover */\r\n  private _setPopoverOpened(): void {\r\n    if (!this._popoverOpen) {\r\n      this._popoverOpen = true;\r\n\r\n      this.popoverOpened$.next();\r\n      this.popoverOpened.emit();\r\n    }\r\n  }\r\n\r\n  /** set state rather than toggle to support triggers sharing a popover */\r\n  private _setPopoverClosed(): void {\r\n    if (this._popoverOpen) {\r\n      this._popoverOpen = false;\r\n\r\n      this.popoverClosed$.next();\r\n      this.popoverClosed.emit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  This method checks that a valid instance of MdPopover has been passed into\r\n   *  mdPopoverTriggerFor. If not, an exception is thrown.\r\n   */\r\n  private _checkPopover() {\r\n    if (!this.popover) {\r\n      throwMtxPopoverMissingError();\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  This method creates the overlay from the provided popover's template and saves its\r\n   *  OverlayRef so that it can be attached to the DOM when openPopover is called.\r\n   */\r\n  private _createOverlay(): OverlayRef {\r\n    if (!this._overlayRef) {\r\n      this._portal = new TemplatePortal(this.popover.templateRef, this._viewContainerRef);\r\n      const config = this._getOverlayConfig();\r\n      this._subscribeToPositions(config.positionStrategy as FlexibleConnectedPositionStrategy);\r\n      this._overlayRef = this._overlay.create(config);\r\n    }\r\n\r\n    return this._overlayRef;\r\n  }\r\n\r\n  /**\r\n   * This method builds the configuration object needed to create the overlay, the OverlayConfig.\r\n   * @returns OverlayConfig\r\n   */\r\n  private _getOverlayConfig(): OverlayConfig {\r\n    const overlayState = new OverlayConfig();\r\n    overlayState.positionStrategy = this._getPosition();\r\n\r\n    /** Display overlay backdrop if trigger event is click */\r\n    if (this.triggerEvent === 'click') {\r\n      overlayState.hasBackdrop = true;\r\n      overlayState.backdropClass = 'cdk-overlay-transparent-backdrop';\r\n    }\r\n\r\n    overlayState.direction = this.dir;\r\n    overlayState.scrollStrategy = this._getOverlayScrollStrategy(this.popover.scrollStrategy);\r\n\r\n    return overlayState;\r\n  }\r\n\r\n  /**\r\n   * This method returns the scroll strategy used by the cdk/overlay.\r\n   */\r\n  private _getOverlayScrollStrategy(strategy: MtxPopoverScrollStrategy): ScrollStrategy {\r\n    switch (strategy) {\r\n      case 'noop':\r\n        return this._overlay.scrollStrategies.noop();\r\n      case 'close':\r\n        return this._overlay.scrollStrategies.close();\r\n      case 'block':\r\n        return this._overlay.scrollStrategies.block();\r\n      case 'reposition':\r\n      default:\r\n        return this._overlay.scrollStrategies.reposition();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Listens to changes in the position of the overlay and sets the correct classes\r\n   * on the popover based on the new position. This ensures the animation origin is always\r\n   * correct, even if a fallback position is used for the overlay.\r\n   */\r\n  private _subscribeToPositions(position: FlexibleConnectedPositionStrategy): void {\r\n    this._positionSubscription = position.positionChanges.subscribe(change => {\r\n      const posisionX: MtxPopoverPositionX =\r\n        change.connectionPair.overlayX === 'start'\r\n          ? 'after'\r\n          : change.connectionPair.overlayX === 'end'\r\n          ? 'before'\r\n          : 'center';\r\n      const posisionY: MtxPopoverPositionY =\r\n        change.connectionPair.overlayY === 'top' ? 'below' : 'above';\r\n\r\n      // required for ChangeDetectionStrategy.OnPush\r\n      this._changeDetectorRef.markForCheck();\r\n\r\n      this.popover.zone.run(() => {\r\n        this.popover.xPosition = posisionX;\r\n        this.popover.yPosition = posisionY;\r\n        this.popover.setCurrentStyles();\r\n\r\n        this.popover.setPositionClasses(posisionX, posisionY);\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * This method builds the position strategy for the overlay, so the popover is properly connected\r\n   * to the trigger.\r\n   * @returns ConnectedPositionStrategy\r\n   */\r\n  private _getPosition(): FlexibleConnectedPositionStrategy {\r\n    const [originX, origin2ndX, origin3rdX]: HorizontalConnectionPos[] =\r\n      this.popover.xPosition === 'before'\r\n        ? ['end', 'start', 'center']\r\n        : this.popover.xPosition === 'after'\r\n        ? ['start', 'end', 'center']\r\n        : ['center', 'start', 'end'];\r\n\r\n    const [overlayY, overlayFallbackY]: VerticalConnectionPos[] =\r\n      this.popover.yPosition === 'above' ? ['bottom', 'top'] : ['top', 'bottom'];\r\n\r\n    /** Reverse overlayY and fallbackOverlayY when overlapTrigger is false */\r\n    const originY = this.popover.overlapTrigger ? overlayY : overlayFallbackY;\r\n    const originFallbackY = this.popover.overlapTrigger ? overlayFallbackY : overlayY;\r\n\r\n    const overlayX = originX;\r\n\r\n    const offsetX =\r\n      this.popover.xOffset && !isNaN(Number(this.popover.xOffset))\r\n        ? Number(this.popover.xOffset)\r\n        : 0;\r\n    const offsetY =\r\n      this.popover.yOffset && !isNaN(Number(this.popover.yOffset))\r\n        ? Number(this.popover.yOffset)\r\n        : 0;\r\n\r\n    /**\r\n     * For overriding position element, when mtxPopoverTargetAt has a valid element reference.\r\n     * Useful for sticking popover to parent element and offsetting arrow to trigger element.\r\n     * If undefined defaults to the trigger element reference.\r\n     */\r\n    let element = this._elementRef;\r\n    if (typeof this.targetElement !== 'undefined') {\r\n      this.popover.containerPositioning = true;\r\n      element = this.targetElement._elementRef;\r\n    }\r\n\r\n    return this._overlay\r\n      .position()\r\n      .flexibleConnectedTo(element)\r\n      .withLockedPosition(true)\r\n      .withPositions([\r\n        {\r\n          originX,\r\n          originY,\r\n          overlayX,\r\n          overlayY,\r\n          offsetY,\r\n        },\r\n        {\r\n          originX: origin2ndX,\r\n          originY,\r\n          overlayX: origin2ndX,\r\n          overlayY,\r\n          offsetY,\r\n        },\r\n        {\r\n          originX,\r\n          originY: originFallbackY,\r\n          overlayX,\r\n          overlayY: overlayFallbackY,\r\n          offsetY: -offsetY,\r\n        },\r\n        {\r\n          originX: origin2ndX,\r\n          originY: originFallbackY,\r\n          overlayX: origin2ndX,\r\n          overlayY: overlayFallbackY,\r\n          offsetY: -offsetY,\r\n        },\r\n        {\r\n          originX: origin3rdX,\r\n          originY,\r\n          overlayX: origin3rdX,\r\n          overlayY,\r\n          offsetY,\r\n        },\r\n        {\r\n          originX: origin3rdX,\r\n          originY: originFallbackY,\r\n          overlayX: origin3rdX,\r\n          overlayY: overlayFallbackY,\r\n          offsetY: -offsetY,\r\n        },\r\n      ])\r\n      .withDefaultOffsetX(offsetX)\r\n      .withDefaultOffsetY(offsetY);\r\n  }\r\n\r\n  private _cleanUpSubscriptions(): void {\r\n    if (this._backdropSubscription) {\r\n      this._backdropSubscription.unsubscribe();\r\n    }\r\n    if (this._positionSubscription) {\r\n      this._positionSubscription.unsubscribe();\r\n    }\r\n    if (this._detachmentsSubscription) {\r\n      this._detachmentsSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  @HostListener('mousedown', ['$event']) _handleMousedown(event: MouseEvent): void {\r\n    if (event && !isFakeMousedownFromScreenReader(event)) {\r\n      this._openedByMouse = true;\r\n    }\r\n  }\r\n}\r\n","import { Directive, ElementRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: 'mtx-popover-target, [mtxPopoverTarget]',\r\n  exportAs: 'mtxPopoverTarget',\r\n})\r\nexport class MtxPopoverTarget {\r\n  constructor(public _elementRef: ElementRef) {}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { OverlayModule } from '@angular/cdk/overlay';\r\nimport { A11yModule } from '@angular/cdk/a11y';\r\n\r\nimport { MtxPopover } from './popover';\r\nimport { MtxPopoverTrigger } from './popover-trigger';\r\nimport { MtxPopoverTarget } from './popover-target';\r\n\r\n@NgModule({\r\n  imports: [OverlayModule, CommonModule, A11yModule],\r\n  exports: [MtxPopover, MtxPopoverTrigger, MtxPopoverTarget],\r\n  declarations: [MtxPopover, MtxPopoverTrigger, MtxPopoverTarget],\r\n})\r\nexport class MtxPopoverModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}